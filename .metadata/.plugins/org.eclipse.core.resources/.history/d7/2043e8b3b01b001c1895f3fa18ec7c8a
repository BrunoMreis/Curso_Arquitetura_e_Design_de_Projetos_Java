package br.com.alura.pedido;

import java.math.BigDecimal;
import java.time.LocalDate;

import br.com.alura.orcamento.Orcamento;
import br.com.alura.pedido.acao.EnviandoEmailPedido;
import br.com.alura.pedido.acao.SalvarPedidoNoBancoDeDados;

public class GeraPedido {
	
	
	private GeraPedidoHandl data = new GeraPedidoHandl();




	public GeraPedido(String cliente, BigDecimal valorOrcamento, int quantidade) {
		super();
		this.data.cliente = cliente;
		this.data.valorOrcamento = valorOrcamento;
		this.data.quantidade = quantidade;
	}


	public void execulta() {
		Orcamento orcamento = new Orcamento(this.data.valorOrcamento,this.data.quantidade);
		
		Pedido pedido = new Pedido(this.data.cliente, LocalDate.now(), orcamento);
		
		EnviandoEmailPedido email = new EnviandoEmailPedido();
		SalvarPedidoNoBancoDeDados salvar = new SalvarPedidoNoBancoDeDados();
		
		
		email.execultar(pedido);
		salvar.execultar(pedido);
	}

}
